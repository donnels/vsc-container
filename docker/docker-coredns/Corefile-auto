. {
    # Auto-detect local DNS from /etc/resolv.conf
    forward . /etc/resolv.conf
    
    # Enable caching
    cache 30
    
    # Enable error logging
    errors
    
    # Enable health check endpoint
    health {
        lameduck 5s
    }
    
    # Enable metrics
    prometheus :9153
}

# Internal vsagcrd.org domain using records plugin (no external files!)
vsagcrd.org {
    # Define records directly in Corefile - automatically updates when container restarts
    records {
        172.20.0.10 coredns.vsagcrd.org dns.vsagcrd.org
        172.20.0.11 proxy.vsagcrd.org www.vsagcrd.org  
        172.20.0.12 vscode.vsagcrd.org code.vsagcrd.org code-server.vsagcrd.org
        172.20.0.13 certbot.vsagcrd.org cert-generator.vsagcrd.org
    }
    
    log
    errors
}
