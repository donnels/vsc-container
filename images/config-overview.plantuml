@startuml config-overview
title Warp Bubble Container Project - Star Trek Themed Architecture
footer (C)2025 Sean Donnellan

skinparam shadowing 1
skinparam BackgroundColor #fff/aaf
skinparam participantBackgroundColor #fff/aaf

package "docker/" {
  file "docker-compose.yaml" as compose
  file ".env" as central_env
  
  package "docker-engineering-console/" {
    file "Dockerfile" as engineering_docker
    file "generate_certs.sh" as cert_script
    file "extensions.json" as extensions
  }
  
  package "docker-deflector/" {
    file "Dockerfile" as deflector_docker
    file "entrypoint.sh" as deflector_entry
  }
  
  package "docker-transporter/" {
    file "Dockerfile" as transporter_docker
    file "squid6.conf.template" as squid_config
    file "squid-start.sh" as squid_start
  }
  
  package "docker-console/" {
    file "Dockerfile" as console_docker
    file "nginx.conf.template" as nginx_lcars
    package "lcars/" {
      file "index.html" as lcars_html
      file "style.css" as lcars_css
    }
  }
  
  package "docker-locator-matrix/" {
    file "Dockerfile" as locator_docker
    file "Corefile" as coredns_config
    file "hosts.template" as coredns_hosts
  }
  
  package "docker-shuttlebay/" {
    file "Dockerfile" as shuttlebay_docker
    file "nginx.conf" as shuttlebay_nginx
  }
  
  package "docker-optical-data-network/" {
    file "Dockerfile" as odn_docker
    file "mosquitto.conf.template" as mqtt_config
    file "entrypoint.sh" as mqtt_entry
  }
}

package "Runtime Architecture" {
  node "TRANSPORTER\nSquid Forward Proxy\n172.20.0.11:3128" as transporter_runtime
  node "ENGINEERING CONSOLE\nVS Code Server\n172.20.0.12:8443\n(Let's Encrypt cert)" as engineering_runtime
  node "LOCATOR-MATRIX\nCoreDNS\n172.20.0.10:53" as locator_runtime
  node "CONSOLE\nLCARS Interface\n172.20.0.16:80" as console_runtime
  node "SHUTTLEBAY\nLanding Page\n172.20.0.14:8080" as shuttlebay_runtime
  node "OPTICAL DATA NETWORK\nMQTT Broker\n172.20.0.17:8883" as odn_runtime
}

' Configuration relationships
compose --> engineering_docker : builds
compose --> deflector_docker : builds
compose --> transporter_docker : builds
compose --> console_docker : builds
compose --> locator_docker : builds
compose --> shuttlebay_docker : builds
compose --> odn_docker : builds

central_env --> compose : Centralized config

transporter_docker --> squid_config : Squid forward proxy
transporter_docker --> squid_start : Startup script

console_docker --> nginx_lcars : LCARS interface  
console_docker --> lcars_html : Static UI
console_docker --> lcars_css : LCARS styling

engineering_docker --> cert_script : Extension installer
engineering_docker --> extensions : Pre-installed extensions

deflector_docker --> deflector_entry : Let's Encrypt generator

locator_docker --> coredns_config : DNS configuration
locator_docker --> coredns_hosts : Internal hosts template

odn_docker --> mqtt_config : MQTT broker config
odn_docker --> mqtt_entry : MQTT startup

' Runtime relationships
transporter_runtime --> engineering_runtime : HTTPS forward proxy
console_runtime --> engineering_runtime : LCARS interface links
locator_runtime --> engineering_runtime : Service discovery
deflector_entry --> engineering_runtime : Let's Encrypt certificates
odn_runtime --> deflector_entry : Certificate distribution

note top of transporter_runtime
**Forward Proxy Features**
- HTTPS tunneling for .vsagcrd.org
- Mobile network traversal
- Squid-based proxy
- Standard port 3128
end note

note top of engineering_runtime
**VS Code Server**
- Let's Encrypt certificate
- HTTPS on port 8443
- Pre-installed extensions
- Star Trek themed naming
end note

note top of locator_runtime
**Internal DNS**
- *.warp.vsagcrd.org resolution
- Service discovery
- Star Trek themed hostnames
end note

note bottom of console_runtime
**LCARS Interface**
:80 - HTTP interface
Star Trek themed UI
VR headset optimized
end note

@enduml
