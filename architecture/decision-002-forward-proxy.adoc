:ARC-ID: 002
:ARC-TITLE: Forward Tunneling Proxy for External Access
:ARC-TOPIC: network
:ARC-STATUS: accepted

[#ARCID-{arc-id}]
= {arc-id} - {arc-topic} - {arc-title}
This decision is part of the {arc-topic} architecture.

== Context

Warp bubble operates on private networks (172.20.0.0/16). HTTPS services need external access with valid certificates. Mobile Steam Deck means changing IPs and network configurations.

== Problem Statement / Motivation

Services need external access while maintaining security. Mobile environment means frequent IP and network changes. Traditional port forwarding or reverse proxy solutions impractical.

== Alternatives Considered

=== Direct Port Forwarding

.Pro
* Simple configuration
* Direct connection
* Low latency

.Con
* Requires static external IP
* Network changes break access
* Complex firewall management
* Security exposure

=== Forward Tunneling Proxy (Squid)

.Pro
* Works with changing networks
* Secure HTTPS tunneling
* Client-initiated connections
* No external firewall configuration
* Supports mobile environments

.Con
* Additional proxy configuration
* Client needs proxy settings
* Slightly increased latency

== Decision Outcome

Implement forward tunneling proxy using Squid for secure external access to internal warp bubble services.

=== Justification

Forward tunneling provides flexibility for mobile environments while maintaining security. Allows warp bubble to be network-agnostic and eliminates complex firewall configurations or static IP requirements.

=== Consequences

* Squid proxy server required within warp bubble
* Client applications need proxy configuration
* PAC (Proxy Auto-Configuration) file needed
* Enhanced security through controlled access
* Network mobility fully supported

=== Derived / Related Decisions

* HTTPS certificates required (<<ARCID-001>>)
* Landing zone server for proxy configuration (<<ARCID-004>>)
* DNS infrastructure within warp bubble (<<ARCID-003>>)
* Test container for multi-device compatibility (<<ARCID-008>>)
