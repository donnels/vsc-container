:ARC-ID: 001
:ARC-TITLE: HTTPS Certificates Required for VS Code Server
:ARC-TOPIC: security
:ARC-STATUS: accepted

[#ARCID-{arc-id}]
= {arc-id} - {arc-topic} - {arc-title}
This decision is part of the {arc-topic} architecture.

== Context

VS Code Server requires HTTPS connections to enable modern web features including WebSocket connections, service workers, and secure browser APIs. The development environment needs to provide a professional-grade secure access experience.

== Problem Statement / Motivation

VS Code Server cannot operate with full functionality over HTTP connections due to browser security restrictions. Self-signed certificates create user experience issues with browser warnings and certificate acceptance workflows that are particularly problematic in mobile/changing network environments.

== Alternatives Considered

=== Self-Signed Certificates

.Pro
* No external dependencies
* Quick to generate
* Full local control

.Con
* Browser security warnings
* Manual certificate acceptance required
* Poor user experience
* Certificate management complexity in mobile environments
* No trust chain validation

=== Let's Encrypt with DNS Challenge

.Pro
* Trusted certificate authority
* No browser warnings
* Automated renewal
* Works with private networks via DNS challenge
* Professional user experience

.Con
* Requires domain ownership
* DNS API access needed
* External dependency on Let's Encrypt

== Decision Outcome

We will use Let's Encrypt certificates with Cloudflare DNS challenge for all HTTPS services, particularly VS Code Server.

=== Justification

The requirement for professional-grade secure access to VS Code Server necessitates trusted certificates. The DNS challenge method allows us to obtain valid certificates even for internal services, eliminating user experience issues while maintaining security.

=== Consequences

* Cloudflare API access required
* Domain ownership and DNS control necessary
* Forward tunneling proxy needed to expose internal services securely
* Automated certificate renewal reduces maintenance overhead
* Enhanced security posture for all services

=== Derived / Related Decisions

* Forward tunneling proxy implementation (<<ARCID-002>>)
* DNS infrastructure within warp bubble (<<ARCID-003>>)
* Cloudflare DNS provider selection (<<ARCID-006>>)
* Test container for multi-device compatibility (<<ARCID-008>>)
* MQTT message bus for optical data network (<<ARCID-010>>)
