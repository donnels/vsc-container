= Architecture
:toc: right
:toclevels: 5
:sectnumlevels: 5
:sectnums:
:toc-title: Table of Contents

== Overview
This document outlines the architecture of the Warp Bubble project, detailing the components, their interactions, and the technologies used. The architecture is designed to be modular, scalable, and maintainable, allowing for easy updates and enhancements.

== Requirements
The architecture must support the following requirements:
* Modular design for easy updates and maintenance
* Scalable to handle increased load
* Secure communication between components
* Centralized configuration management
* Run on steamdeck desktop with podman-compose
* support following minimal services within a virtual network:

[cols="1,2,2,3,2",options="header"]
|===
|Service |Container Name |Product |Function |Exposed

|locator-matrix
|LOCATOR-MATRIX
|CoreDNS
|Internal DNS resolution for *.warp.vsagcrd.org domains within the warpbubble network
|Internal :53

|transporter
|TRANSPORTER
|Squid
|Forward proxy for HTTPS tunneling, enabling secure access to internal services
|External :3128

|engineering-console
|ENGINEERING CONSOLE
|VS Code Server
|VS Code development environment with HTTPS access and certificate management
|Internal :8443

|deflector
|DEFLECTOR
|Certbot
|Let's Encrypt certificate generation and management via Cloudflare DNS challenge
|Internal

|shuttlebay
|SHUTTLEBAY
|Nginx
|Landing page and proxy configuration interface with PAC file support
|External :8888

|console
|CONSOLE
|Nginx
|LCARS-themed central page to access VS Code server and other services
|Internal :80

|optical-data-network
|OPTICAL DATA NETWORK
|Eclipse Mosquitto
|MQTT message bus for secure certificate distribution and system event communication
|Internal :8883

|transporter-test
|TRANSPORTER (TEST)
|Squid
|Test instance of forward proxy with Ubuntu configuration
|External :3129
|===

== Decisions
The architecture is designed with the following key decisions in mind:

include::decision-001-https-certificates.adoc[]

include::decision-002-forward-proxy.adoc[]

include::decision-003-dns-infrastructure.adoc[]

include::decision-004-landing-zone.adoc[]

include::decision-005-centralized-configuration.adoc[]

include::decision-006-cloudflare-dns.adoc[]

include::decision-007-lcars-interface.adoc[]

include::decision-008-test-container.adoc[]

include::decision-009-steamdeck-platform.adoc[]

include::decision-010-mqtt-optical-data-network.adoc[]

include::decision-011-star-trek-naming.adoc[]

